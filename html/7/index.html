<!DOCTYPE html>
<html lang="en-US">
<head>
  <!-- [START:head] -->
  <!-- [STOP:head] -->
  <title>Power up the Battery API - HTML and CSS Advent 2012 by Digitpaint</title>
  <meta name="author" content="All of us at Digitpaint">
  
  <meta property="og:title" content="Power up the Battery API - HTML &amp; CSS Advent 2012">
  <meta property="og:url" content="http://advent2012.digitpaint.nl/7">
  <meta property="og:image" content="/assets/opengraph/07.png">
  <meta property="og:description" content="Checking your battery status with Battery API">  
  <meta name="description" content="Checking your battery status with Battery API">
  
  <link rel="stylesheet" href="7.css" />
  <script src="7.js"></script>
  
</head>
<body class="layout-article">
  <div class="page">

    <!-- [START:layout/ribbon] -->
    <!-- [STOP:layout/ribbon] -->    
        
    <article class="main">

      <!-- [START:layout/article-header?nr=07&title=Power+up+the+Battery+API&previous=/6/&next=/8/] -->
      <!-- [STOP:layout/article-header] -->    

      <div class="body text">
        <p class="intro">
          While not really one of the fancy-pants APIs, the Battery API is quite useful. Especially if you're building an
          offline web-app. We can read out the charging status, battery level, charge and discharge time, all within the
          browser.
        </p>

        <section class="examples">
          <h2>Your current battery status</h2>
          <p class="warning">
            Currently only works in Firefox (Note: on OS X it's slightly wonky and
            sometimes doesn't trigger events, Firefox Aurora seems to work fine).
          </p>
          <div class="row">
            <figure class="example">
            
              <div class="battery" id="battery">
                <meter class="level" min="0" max="1"></meter>
                <div class="status"></div>
                
                <div class="charge-status"></div>
                <div class="percentage-status">
                  <div class="percentage"></div>
                  remaining
                </div>
                
              </div>
            
              <figcaption>
                Connect and disconnect your charger to see what's happening.
              </figcaption>
            </figure>
          </div>
        </section>
        
        <h2>Mister, could you explain this to me?</h2>          
        <p>
          The Battery API is generally a clean and well-behaved API, although it does have it's quirks :). The API allows
          you to request battery information on the <code>navigator.battery</code> object. The <code>navigator.battery</code> object exposes: the
          <code>level</code> (a value between 0 and 1), the <code>chargeTime</code> (time until fully charged in seconds, 0 when full), the
          <code>dischargeTime</code> (time until empty, infinity when plugged in) and <code>charging</code> (wether we're currently charging or not â€”
          this value is false if the battery is full)          
        </p>
        <p>
          Other than just reading out values, the <code>navigator.battery</code> object also has a couple of events:          
        </p>
        <ul>
          <li>
            The <code>chargingchange</code> event is triggered when the charging state is changed.
          </li>
          <li>
            The <code>levelchange</code> event is triggered if the battery level has changed.
          </li>
          <li>
            The <code>chargingtimechange</code> event is triggered when the chargingtime changed.
          </li>
          <li>
            The <code>dischargingtimechange</code> event is triggered when the dischargingtime changed.
          </li>
        </ul>
        
        <h2>Useful?</h2>
        <p>
          Sort of, but only in some fringe cases. You could disable certain effects or other CPU intensive tasks that
          aren't vital to conserve a user's battery life. If you had to store data on a server, you could detect the
          battery status and when it drops under 10% send the data more frequently. 
        </p>
        
        <h2>Nice! Can I have it?</h2>
        <p>
          It's only supported on Firefox at this time, but on OS X it acts a bit wonky. Firefox Aurora on OS X seems fine. There used to be support in
          Chrome (somewhere in 2012) but it has since been removed (no reason given).
        </p>
        
        <h2>Show me the source!</h2>
        <p>
          Feel free to look around the differente source files we used for this example.
        </p>
        <ul>
          <li><a href="7.js">The javascripts</a></li>
          <li><a href="7.css">The stylesheet</a></li>
        </ul>
      </div>
      
      <footer class="footer text">
          
        <section class="attribution">
          <h2>Attribution</h2>
        
          <p>
            David Walsh has an extensive blog post titled "<a href="http://davidwalsh.name/battery-api"
            target="_blank">JavaScript Battery API</a>" which explains most of the basics in more detail.
          </p>
        </section>
        
        <!-- [START:share] -->
        <!-- [STOP:share] -->
          
      </footer>
      
      <!-- [START:layout/site-navigation] --> 
      <!-- [STOP:layout/site-navigation] -->
      
    </article>
        
  </div>
    
  <script>  
    var addthis_share = { 
      templates: {
        twitter: 'Power up the Battery API in the HTML and CSS Advent 2012 #dpadvent {{url}}'
      }
    }
  </script>
  
  <!-- [START:javascripts] -->
  <!-- [STOP:javascripts] -->    
</body>
</html>
